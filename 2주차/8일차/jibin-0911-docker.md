# DevOps 온보딩 Day8

# 1. 컨테이너

## 정의

실행에 필요한 모든 파일을 포함한 전체 실행 환경에서 애플리케이션을 패키징하고 격리할 수 있는 기술입니다.

종류는 도커와 리눅스 컨테이너 등이 있습니다.

## 도커와 리눅스 컨테이너 차이

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/7c143be4-910b-4912-bb85-bb10dce9d9ee/23c24c1f-4d32-4c2a-b6cf-960d5eb3f183/Untitled.png)

Docker기술은 어플리케이션을 개별 프로세스로 세분화하도록 권장하고 이를 위한 툴을 제공합니다.

Linux컨테이너는 멀티플 프로세스를 관리할 수 있는 init시스템을 사용합니다. 즉 어플리케이션을 하나로 실행할 수 있습니다.

### 도커를 더 선호하는 이유

도커는 리눅스 컨테이너 기술을 기반으로 한 오픈소스 서비스입니다. 

서버 하나에서 컨테이너를 이용해 여러 서버를 구축할 수 있으며 쉽고 빠른 배포,관리가 가능하며

개발 환경에 구애받지 않아도 되며 불필요하게 돈을 주고 서버를 증설할 필요도 없습니다.

이러한 이유 때문에 도커를 더 선호한다고 생각합니다.

## 장점

- 가벼운 가상화 기술
    - OS없이 프로세스와 파일 시스템을 분리하는 형태이기 때문에 크기가 작고 가볍습니다.
- 높은 집적도
    - 여러  개의 컨테이너를 만들어서 실행 중이라고 해도 OS는 하나이므로, 가상머신에 비해 고밀도화가 가능합니다. 컨테이너에서는 실행되는 프로세스를 위한 메모리만 필요하기 때문에 낮은 사양의 환경에서 더욱 활용도가 높아집니다.
- 일관성 있는 환경
    - 다른 어플리케이션과 분리된 어플리케이션에 최적화된 환경을 생성할 수 있습니다.
- 배포 편이성
    - 어플리케이션과 종속 항목을 버전 제어가 쉬운 하나의 패키지로 묶어 팀 내의 여러 개발자가 쉽게 복제하고 클러스터 내의 머신으로도 간편하게 복사할 수 있습니다.

## 단점

- 보안문제가 있다. 컨테이너 하나가 뚫리면 OS Kernel이 위험해지는 것 모든 컨테이너가 위험해질 수도 있다.

> 보안 문제 해결법
> 
> 1. **컨테이너 보안 정책**: 컨테이너 보안 정책을 적용하여 특정 컨테이너가 네트워크에 액세스하거나 시스템 리소스를 사용하는 것을 제한할 수 있습니다. 이를 통해 공격자가 컨테이너를 통해 시스템을 공격하는 것을 방지할 수 있습니다.
> 2. **컨테이너 런타임 보안**: 컨테이너 런타임 보안 솔루션을 사용하여 실행 중인 컨테이너를 모니터링하고, 의심스러운 활동을 탐지하고, 필요한 경우 컨테이너를 자동으로 중단할 수 있습니다.

# 2. 도커

## 정의

도커는 리눅스 컨테이너를 만들고 사용할 수 있게 도와주는 툴입니다.

## 장점

- 물리 서버 한 대에 여러 개의 서버를 띄울 수 있으므로 그만큼 물리 서버의 수를 줄일 수 있으며 효율을 높일 수 있습니다.
- 컨테이너는 자유로이 옮기고 복제할 수 있어 물리적 환경의 차이, 서버 구성의 차이를 무시할 수 있으므로 운영 서버와 개발 서버의 환경 차이로 인한 문제 원천 방지 가능합니다.
- 컨테이너에 리눅스 커널은 포함되어 있지 않으므로 가상화 기술에 비해 압도적으로 용량이 가볍다.
- 적은 명명어로 호나경 구축이 끝나기 때문에 다루기 쉽다.

## 단점

- 리눅스 운영체제에서 시행이 가능한 소프트웨어만 지원한다.
- 물리 서버 한대에 여러개의 컨테이너를 올리는 형태이므로 호스트 서버에 문제가 생기면 모든 컨테이너에 영향을 미치게 되므로 치명적이다.

## 구성요소

### 도커파일:

도커 이미지를 빌드하기 위해 필요한 스크립트

### 도커이미지

도커에서 서비스 운영에 필요한 서버 프래그램, 소스코드 및 라이브러리, 컴파일된 실행파일을 묶는 형태를 말합니다. 특정 프로세스를 실행하기 위한 모든 파일과 설정값을 지닌 것입니다.

### 도커 컨테이너

이미지를 실행한 상태로, 응용프로그램의 종속성과 함께 응용프로그램 자체를 패키징 or 캡슐화하여 격리된 공간에서 프로세스를 동작시키는 기술입니다.

> **캡슐화**: 이 캡슐화는 애플리케이션의 실행에 필요한 모든 것을 포함하므로, 도커 이미지를 사용하면 애플리케이션을 어디서든 일관되게 실행할 수 있습니다
> 

> **패키징**: 도커 이미지는 파일을 계층으로 나눠서 저장할 수 있는 유니온 마운트 기술을 사용합니다. 이 기술은 파일 시스템을 여러 개의 계층으로 나누어 관리하며, 각 계층은 이전 계층의 변경 사항을 저장합니다1. 이렇게 하면 같은 파일 시스템을 공유하는 여러 컨테이너 간에 중복된 데이터를 효율적으로 관리할 수 있습니다
> 

## 3. 자신이 생각하는 컨테이너

일관된 환경을 제공하므로서 개발자가 배포, 관리와 같은 것들을 편리하고 쉽게 할 수 있도록 도와주는 것입니다.
