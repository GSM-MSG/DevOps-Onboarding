## 1. 도커 볼륨이란?
도커 불륨이란 말그대로 도커에서 사용하는 불륨이다.<br>

<img width="616" alt="Screenshot 2023-09-14 at 11 35 17 PM" src="https://github.com/GSM-MSG/DevOps-Onboarding/assets/81360154/947857dd-b4d5-498c-a8d6-09c0ce7056f8">

container에서 변경사항은 실행된 이미지의 write layer에 기록되고 해당 레이어는 컨테이너가 삭제되면 같이 삭제된다.<br>
하지만 container의 생성/삭제는 너무 쉽게 일어나고 이 때문에 컨테이너에 저장된 중요한 정보가 삭제도리 우려가있다.<br>
이를 예방하기 위해 도커는 데이터의 영속성을 보장하기 위해 여러 방법을 지원하는데 그중 하나가 도커 불륨이다.<br>

## 2. 호스트와 볼륨을 공유하는법

![image](https://github.com/GSM-MSG/DevOps-Onboarding/assets/81360154/755af8d6-98a0-4916-a3b6-b293b03c167e)

docker run에 -v host_directory:container_directory 옵션을 추가해 사용한다.<br>
호스트의 일부 디렉토리를 컨테이너 일부 디렉토리에 **덮어씌운다.**<br>
호스트의 디렉토리에 있는 파일을 컨테이너에 복사하는 것이 아니라 말그대로 그냥 한 디스크 공간을 둘이 같이 쓴다.<br>
이 때문에 보안상에 문제가 생길 수 있어 도커 공식 문서에선 사용을 자제하라고 한다.<br>
그리고 덮어 씌우는 것이기 때문에 당연히 이미 컨테이너에 /home/abc라는 디렉토리가 있고 호스트의 디렉토리를 해당 디렉토리에 마운트하여 run을 하면 기존에 컨테이너의 /home/abc에 있던 파일들은 호스트 디렉토리에 있던 파일들로 덮어씌어지며 사라진다.<br>
도커가 관리하는 디렉토리 내에 생성되고 docker cli or api를 통해 관리가 가능하므로 위의 방법보다 더 안전한 방법이다.<br>
또한 생성된 불륨은 여러 컨테이너가 사용할 수 있다.

## 3. 도커가 관리하는 볼륨을 생성해보자
docker volume create --name 도커불륨이름 을 통해 생성한다.<br>
그렇게 생성하게 되면 일반적으로 호스트에 도커 데이터가 저장되는 /var/lib/docker/volumes/volume이름/_data 을 할당받게 된다.<br>

## tmpfs
도커 불륨에는 tmpfs라는 방식도 있는데 특징만 알아보고 지나가겠다.
- 호스트 시스템의 메모리에 저장됩니다.
- 보안 혹은 비영구 상태 데이터를 작성해야 하는 이유로 데이터를 유지하지 않으려는 경우에 가장 잘 사용됩니다.
- --tmpfs <컨테이너에서 마운트되는 경로>

## 4. 도커 로그
docker logs 컨테이너이름 을 통해 docker에서 생성된 로그를 확인할 수 있다.
도커 로그에는 여러 드라이버가 있다.<br>
로그 파일을 어떻게 어디에 남길지에 따라 여러 드라이버를 사용할 수 있다.


